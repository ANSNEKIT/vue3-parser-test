(function(e){function t(t){for(var s,o,n=t[0],i=t[1],l=t[2],u=0,b=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);d&&d(t);while(b.length)b.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],s=!0,n=1;n<a.length;n++){var i=a[n];0!==r[i]&&(s=!1)}s&&(c.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},c=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue3-parser-test/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=i;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0098":function(e,t,a){},"022b":function(e,t,a){},"06fc":function(e,t,a){"use strict";a("39fa")},"0861":function(e,t,a){},"0ac0":function(e,t,a){"use strict";a("b053")},1660:function(e,t,a){"use strict";a("231d")},"231d":function(e,t,a){},"25cb":function(e,t,a){},3433:function(e,t,a){},"35bf":function(e,t,a){"use strict";a("a953")},"369d":function(e,t,a){"use strict";a("0861")},"369f":function(e,t,a){},"39f3":function(e,t,a){"use strict";a("022b")},"39fa":function(e,t,a){},"3fbe":function(e,t,a){"use strict";a("9f25")},"56a9":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("7a23");function r(e,t){const a=Object(s["B"])("router-view");return Object(s["t"])(),Object(s["d"])(a)}a("786f");var c=a("6b0d"),o=a.n(c);const n={},i=o()(n,[["render",r]]);var l=i,d=a("6605");const u=e=>(Object(s["w"])("data-v-1f216f16"),e=e(),Object(s["u"])(),e),b={class:"page-parser"},p=u(()=>Object(s["g"])("h1",{class:"page-parser__title"},"Настройки парсера",-1));function m(e,t,a,r,c,o){const n=Object(s["B"])("BaseForm");return Object(s["t"])(),Object(s["f"])("div",b,[p,Object(s["i"])(n,{class:"page-parser__form",onSubmitForm:o.onSubmit},null,8,["onSubmitForm"])])}a("14d9");const f={class:"form__tags"},O={class:"form__buttons"};function g(e,t,a,r,c,o){const n=Object(s["B"])("BaseSelect"),i=Object(s["B"])("BaseInput"),l=Object(s["B"])("BaseTag"),d=Object(s["B"])("BaseTextarea"),u=Object(s["B"])("BaseButton");return Object(s["t"])(),Object(s["f"])("form",{action:"",method:"post",onKeydown:t[6]||(t[6]=(...e)=>o.onEnterForm&&o.onEnterForm(...e)),class:"form"},["parser"===a.formType?(Object(s["t"])(),Object(s["f"])(s["a"],{key:0},[Object(s["i"])(n,{id:"exchange",class:"form__select",modelValue:e.parseForm.exchange,"onUpdate:modelValue":t[0]||(t[0]=t=>e.parseForm.exchange=t),label:"Выберите биржу",options:e.exchangeOptions},null,8,["modelValue","options"]),Object(s["i"])(i,{id:"keyword",class:"form__input",modelValue:e.parseForm.keyword,"onUpdate:modelValue":t[1]||(t[1]=t=>e.parseForm.keyword=t),modelModifiers:{trim:!0},label:"Ключевые слова",pattern:"([0-9a-zа-я]+)([,][\\s][0-9a-zа-я]+)*"},null,8,["modelValue"])],64)):(Object(s["t"])(),Object(s["f"])(s["a"],{key:1},[Object(s["i"])(i,{id:"title",class:"form__input",modelValue:e.editForm.title,"onUpdate:modelValue":t[2]||(t[2]=t=>e.editForm.title=t),modelModifiers:{trim:!0},label:"Заголовок",required:""},null,8,["modelValue"]),Object(s["g"])("ul",f,[(Object(s["t"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(e.editForm.keyword,(e,t)=>(Object(s["t"])(),Object(s["d"])(l,{key:t+"-wgojojwd",id:t,"is-edit":!0,onTagDelete:o.onDeleteTag},{default:Object(s["H"])(()=>[Object(s["h"])(Object(s["D"])(e),1)]),_:2},1032,["id","onTagDelete"]))),128))]),Object(s["i"])(i,{id:"edit-keyword",class:"form__input",modelValue:e.editForm.newKeyword,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editForm.newKeyword=t),modelModifiers:{trim:!0},label:"Добавить ключевое слово по Enter",pattern:"[0-9a-zа-я]+",onKeyup:Object(s["J"])(Object(s["K"])(o.onAddTag,["stop"]),["enter"])},null,8,["modelValue","onKeyup"]),Object(s["i"])(i,{id:"url",class:"form__input",modelValue:e.editForm.url,"onUpdate:modelValue":t[4]||(t[4]=t=>e.editForm.url=t),modelModifiers:{trim:!0},label:"Ссылка",type:"url",placeholder:"https://example.com",pattern:"https://.*","max-length":"450",required:""},null,8,["modelValue"]),Object(s["i"])(d,{id:"article",label:"Статья",modelValue:e.editForm.article,"onUpdate:modelValue":t[5]||(t[5]=t=>e.editForm.article=t),modelModifiers:{trim:!0,lazy:!0}},null,8,["modelValue"])],64)),Object(s["g"])("div",O,[Object(s["i"])(u,{type:"button",class:"base-button--cancel",onClick:o.onCancel},{default:Object(s["H"])(()=>[Object(s["h"])("Отмена")]),_:1},8,["onClick"]),Object(s["i"])(u,{type:"submit",class:"base-button--ok",onClick:o.onSubmit},{default:Object(s["H"])(()=>[Object(s["h"])(Object(s["D"])(o.submitName),1)]),_:1},8,["onClick"])])],32)}const h={class:"base-input"},j=["for"],k=["id","type","value"];function y(e,t,a,r,c,o){return Object(s["t"])(),Object(s["f"])("div",h,[a.label?(Object(s["t"])(),Object(s["f"])("label",{key:0,for:a.id,class:"base-input__label"},Object(s["D"])(a.label),9,j)):Object(s["e"])("",!0),Object(s["g"])("input",Object(s["o"])({id:a.id,type:a.type,value:a.modelValue},e.$attrs,{"max-length":"255",class:"base-input__input",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))}),null,16,k)])}var _={name:"BaseInput",props:{id:{type:String,default:""},label:{type:String,default:""},modelValue:{type:String,default:""},type:{type:String,default:"text"}},emits:["update:modelValue"],methods:{}};a("e99d");const v=o()(_,[["render",y],["__scopeId","data-v-3fa2faf9"]]);var w=v;const T={class:"base-select"},x=["for"],S={class:"base-select__select-wrap"},B=["id","value"],F=["value"];function I(e,t,a,r,c,o){return Object(s["t"])(),Object(s["f"])("div",T,[Object(s["g"])("label",{for:a.id,class:"base-select__label"},Object(s["D"])(a.label),9,x),Object(s["g"])("div",S,[Object(s["g"])("select",{id:a.id,value:a.modelValue,class:"base-select__select",onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},[(Object(s["t"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(a.options,e=>(Object(s["t"])(),Object(s["f"])("option",{key:e.id,value:e.value},Object(s["D"])(e.name),9,F))),128))],40,B)])])}var V={name:"BaseSelect",props:{id:{type:String,default:""},label:{type:String,default:""},options:{type:Array,default:()=>[]},modelValue:{type:String,default:""}},emits:["update:modelValue"]};a("3fbe");const D=o()(V,[["render",I],["__scopeId","data-v-26877794"]]);var $=D;const N={class:"base-button"};function E(e,t,a,r,c,o){return Object(s["t"])(),Object(s["f"])("button",N,[Object(s["A"])(e.$slots,"default",{},void 0,!0)])}var C={};a("39f3");const M=o()(C,[["render",E],["__scopeId","data-v-afc0bb2a"]]);var P=M;const z={class:"base-textarea"},J=["for"],K=["id"];function A(e,t,a,r,c,o){return Object(s["t"])(),Object(s["f"])("div",z,[Object(s["g"])("label",{class:"base-textarea__label",for:a.id},Object(s["D"])(a.label),9,J),Object(s["I"])(Object(s["g"])("textarea",Object(s["o"])({id:a.id,class:"base-textarea__text"},e.$attrs,{rows:"8","onUpdate:modelValue":t[0]||(t[0]=t=>e.text=t),onInput:t[1]||(t[1]=t=>e.$emit("change:modelValue",e.text))}),null,16,K),[[s["F"],e.text]])])}var H={name:"BaseTextarea",props:{id:{type:String,default:""},label:{type:String,default:""},modelValue:{type:String,default:""}},emits:["change:modelValue"],data:()=>({text:""}),mounted(){this.text=this.modelValue}};a("0ac0");const U=o()(H,[["render",A],["__scopeId","data-v-7bbe454e"]]);var L=U;const R={class:"tag"};function q(e,t,a,r,c,o){return Object(s["t"])(),Object(s["f"])("li",R,[Object(s["A"])(e.$slots,"default",{},void 0,!0),a.isEdit?(Object(s["t"])(),Object(s["f"])("div",{key:0,"data-role":"button",class:"tag__delete",onClick:t[0]||(t[0]=t=>e.$emit("tagDelete",a.id))}," x ")):Object(s["e"])("",!0)])}var Y={name:"BaseTag",props:{id:{type:Number,default:0},tag:{type:String,default:""},isEdit:{type:Boolean,default:!1}},emits:["tagDelete"]};a("1660");const Z=o()(Y,[["render",q],["__scopeId","data-v-6665179c"]]);var G=Z,Q={name:"BaseForm",components:{BaseInput:w,BaseSelect:$,BaseButton:P,BaseTextarea:L,BaseTag:G},props:{formType:{type:String,default:"parser"},task:{type:Object,default:()=>{}}},emits:["submitForm"],data:()=>({parseForm:{exchange:"1",keyword:""},editForm:{title:"",article:"",url:"",keyword:[],newKeyword:""},exchangeOptions:[{id:"freelance",value:"1",name:"Freelance"},{id:"kwork",value:"2",name:"Kwork"},{id:"all",value:"3",name:"Выбрать все"}]}),created(){if("edit"===this.formType){const e=()=>({title:this.task.title,article:this.task.article,url:this.task.url,keyword:this.task.keyword});this.editForm=e()}},computed:{submitName(){return"edit"===this.formType?"Сохранить":"Отправить"}},methods:{onEnterForm(e){if(13===e.keyCode)return e.preventDefault(),!1},onCancel(){"parser"===this.formType?this.parseForm={exchange:"1",keyword:""}:this.$router.push({name:"Task",params:{id:this.task.id}})},onAddTag(){this.editForm.keyword.push(this.editForm.newKeyword),this.editForm.newKeyword=""},onDeleteTag(e){const t=[...this.editForm.keyword];t.splice(e,1),this.editForm.keyword=t},onSubmit(e){e.preventDefault(),"parser"===this.formType?this.$emit("submitForm",this.parseForm):this.$emit("submitForm",this.editForm)}}};a("9931");const W=o()(Q,[["render",g],["__scopeId","data-v-4ac9ee88"]]);var X=W,ee=a("ade3"),te=(a("d9e2"),a("bc3a"));const ae="Api-Key VSfHLDHK.MM3MeLZNV9HMDEY5s1zz4Yl79lbRwoux",se=te["a"].create({baseURL:"https://parser.api-compas-goo.ru/",headers:{Authorization:ae}});se.interceptors.response.use(e=>e,e=>{throw console.error("Возникла ошибка при выполнении запроса к серверу ",e),new Error(e)});var re=se;class ce{static async get(e,t={}){const{data:a}=await re.get(e,t);return a}static async getEntityById(e,t,a={}){const{data:s}=await re.get(`api/${e}/${t}/`,a);return s}}class oe extends ce{static async post(e,t){const{data:a}=await re.post(e,t);return a}static async put(e,t){const{data:a}=await re.put(`api/${e}/${t.id}/`,t);return a}static async patch(e,t){const{data:a}=await re.patch(`api/${e}/${t.id}/`,t);return a}static async delete(e,t){const{data:a}=await re.delete(`api/${e}/${t}/`,t);return a}}class ne extends oe{constructor(...e){super(...e),Object(ee["a"])(this,"userId",void 0),Object(ee["a"])(this,"parsourceId",void 0),Object(ee["a"])(this,"keywords",void 0),Object(ee["a"])(this,"hash",void 0),Object(ee["a"])(this,"sources",void 0)}static async post(e={}){const t="/parser-config/",a=await oe.post(t,e);return this.userId=a.id_user,this.parsourceId=a.id_parsource,this.keywords=a.keywords,this.hash=a.hash_parsource,a}static async get(e={}){const t="/parser-config/",a=await oe.get(t,e),s=this._filterByConfig(a);return s}static _filterByConfig(e=[]){const t=e.filter(e=>Number(this.userId)===Number(e.id_user)).filter(e=>Number(this.parsourceId)===Number(e.id_parsource)).filter(e=>String(this.keywords)===String(e.keywords)).filter(e=>String(this.hash)===String(e.hash_parsource));return t}}var ie=a("5502");const le={["1"]:"freelancehabr",["2"]:"kworkservice"};var de={name:"PageFormParse",components:{BaseForm:X},methods:{...Object(ie["b"])(["getTasks","getExchange"]),async onSubmit({exchange:e,keyword:t}){const a=[];let s=[];"3"===e?(a.push("1"),a.push("2")):a.push(e);const r={sources:a,id_user:0,id_parsource:0,keywords:t,hash_parsource:"string-test123"},c=await ne.post(r);if(Object.keys(c).length>0){const t=await ne.get({params:{hash_parsource:r.hash_parsource}});le[e]===le["1"]?s=t[t.length-2].freelancehabr_result:le[e]===le["2"]?s=t[t.length-2].kwork_result:(s=t[t.length-2].freelancehabr_result,s.push(...t[t.length-2].kwork_result)),this.getTasks(s),this.getExchange(e),this.$router.push({name:"Tasks"})}}}};a("369d");const ue=o()(de,[["render",m],["__scopeId","data-v-1f216f16"]]);var be=ue;const pe={class:"page-tasks"};function me(e,t,a,r,c,o){const n=Object(s["B"])("TheCard");return Object(s["t"])(),Object(s["f"])("div",pe,[(Object(s["t"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(e.tasks,e=>(Object(s["t"])(),Object(s["d"])(n,{key:e.id,id:e.id,title:e.title,article:e.article,keyword:e.keyword,url:e.url,onDeleteTask:o.onDeleteTask},null,8,["id","title","article","keyword","url","onDeleteTask"]))),128))])}const fe={class:"card"},Oe={class:"card__title"},ge={class:"card__tags"},he={class:"card__description"};function je(e,t,a,r,c,o){const n=Object(s["B"])("RouterLink");return Object(s["t"])(),Object(s["f"])("section",fe,[Object(s["i"])(n,{to:{name:"Task",params:{id:a.id}},class:"card__title-link"},{default:Object(s["H"])(()=>[Object(s["g"])("h2",Oe,Object(s["D"])(a.title),1)]),_:1},8,["to"]),Object(s["g"])("ul",ge,[(Object(s["t"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(a.keyword,(e,t)=>(Object(s["t"])(),Object(s["f"])("li",{key:"tag-"+t,class:"card__tag"},Object(s["D"])(e),1))),128))]),Object(s["g"])("p",he,Object(s["D"])(a.article),1),Object(s["g"])("button",{class:"card__close",onClick:t[0]||(t[0]=(...e)=>o.deleteTask&&o.deleteTask(...e))})])}var ke={name:"TheCard",props:{id:{type:String,default:"",required:!0},title:{type:String,default:""},url:{type:String,default:""},article:{type:String,default:""},keyword:{type:Array,default:()=>[]}},emits:["deleteTask"],methods:{deleteTask(){this.$emit("deleteTask",this.id)}}};a("ed96");const ye=o()(ke,[["render",je],["__scopeId","data-v-7a79b2ca"]]);var _e=ye,ve={name:"PageParsedList",components:{TheCard:_e},created(){const e=localStorage.getItem("tasks"),t=localStorage.getItem("exchange");e&&this.getTasks(JSON.parse(e)),t&&this.getExchange(JSON.parse(t))},computed:{...Object(ie["d"])(["tasks","exchange"])},methods:{...Object(ie["b"])(["getTasks","getDeleteTask","getExchange"]),async onDeleteTask(e){le[this.exchange]&&(await oe.delete(le[this.exchange],e),this.getDeleteTask(e))}}};a("35bf");const we=o()(ve,[["render",me],["__scopeId","data-v-26eea702"]]);var Te=we;const xe={class:"task-info"},Se={class:"task-info__task card"},Be={class:"card__title"},Fe={class:"card__tags"},Ie={class:"card__description"},Ve=["href"],De={class:"card__description"},$e={class:"card__buttons"};function Ne(e,t,a,r,c,o){const n=Object(s["B"])("RouterLink"),i=Object(s["B"])("BaseTag"),l=Object(s["B"])("BaseButton");return Object(s["t"])(),Object(s["f"])("div",xe,[Object(s["i"])(n,{to:"/tasks",class:"task-info__back link-btn"},{default:Object(s["H"])(()=>[Object(s["h"])("Назад")]),_:1}),Object(s["g"])("section",Se,[Object(s["g"])("h2",Be,Object(s["D"])(o.task.title),1),Object(s["g"])("ul",Fe,[(Object(s["t"])(!0),Object(s["f"])(s["a"],null,Object(s["z"])(o.task.keyword,(e,t)=>(Object(s["t"])(),Object(s["d"])(i,{key:"tag-"+t},{default:Object(s["H"])(()=>[Object(s["h"])(Object(s["D"])(e),1)]),_:2},1024))),128))]),Object(s["g"])("p",Ie,[Object(s["h"])(" Источник - "),Object(s["g"])("a",{href:o.task.url},Object(s["D"])(o.task.url),9,Ve)]),Object(s["g"])("p",De,Object(s["D"])(o.task.article),1),Object(s["g"])("div",$e,[Object(s["i"])(n,{to:{name:"TaskEdit",params:{id:o.task.id}}},{default:Object(s["H"])(()=>[Object(s["i"])(l,{class:"base-button--orange"},{default:Object(s["H"])(()=>[Object(s["h"])("Редактировать")]),_:1})]),_:1},8,["to"])])])])}var Ee={name:"PageTaskInfo",components:{BaseButton:P,RouterLink:d["a"],BaseTag:G},data:()=>({isEdit:!1,isAddTag:!1}),created(){const e=localStorage.getItem("tasks");this.getTasks(JSON.parse(e))},computed:{...Object(ie["c"])(["getTaskById"]),task(){return this.getTaskById(this.$route.params.id)}},methods:{...Object(ie["b"])(["getTasks"])}};a("5c35");const Ce=o()(Ee,[["render",Ne],["__scopeId","data-v-39122488"]]);var Me=Ce;const Pe=e=>(Object(s["w"])("data-v-53271771"),e=e(),Object(s["u"])(),e),ze={class:"page-task-edit"},Je=Pe(()=>Object(s["g"])("h1",{class:"page-task-edit__title"},"Редактировать задачу",-1));function Ke(e,t,a,r,c,o){const n=Object(s["B"])("BaseForm");return Object(s["t"])(),Object(s["f"])("div",ze,[Je,Object(s["i"])(n,{"form-type":"edit",task:o.task,onSubmitForm:o.onEdit},null,8,["task","onSubmitForm"])])}var Ae={name:"PageTaskEdit",components:{BaseForm:X},created(){const e=localStorage.getItem("tasks");e&&this.getTasks(JSON.parse(e));const t=localStorage.getItem("exchange");t&&(this.exchange=JSON.parse(t))},data:()=>({exchange:""}),computed:{...Object(ie["c"])(["getTaskById"]),task(){return this.getTaskById(this.$route.params.id)}},methods:{...Object(ie["b"])(["getTasks","getTask"]),async onEdit(e){const t={...e};t.keyword=t.keyword.join(", "),t.id=this.task.id,le[this.exchange]&&(await oe.put(le[this.exchange],t),await this.getTask(t)),this.$router.push({name:"Task",params:{id:t.id}})}}};a("06fc");const He=o()(Ae,[["render",Ke],["__scopeId","data-v-53271771"]]);var Ue=He;const Le=[{path:"/",name:"Form",component:be},{path:"/task/:id",name:"Task",component:Me},{path:"/task/:id/edit",name:"TaskEdit",component:Ue},{path:"/tasks",name:"Tasks",component:Te}],Re=Object(d["b"])({history:Object(d["c"])(),routes:Le});var qe=Re,Ye=Object(ie["a"])({state:{tasks:[],exchange:""},getters:{getTaskById:e=>t=>{var a;return null!==(a=e.tasks.find(e=>Number(e.id)===Number(t)))&&void 0!==a?a:{}}},mutations:{updateTask(e,t){const a=e.tasks.findIndex(e=>Number(e.id)===Number(t.id));-1!==a&&e.tasks.splice(a,1,t)},setDeleteTask(e,t){const a=e.tasks.findIndex(e=>Number(e.id)===Number(t));-1!==a&&e.tasks.splice(a,1)},setTasks(e,t){e.tasks=t},setExchange(e,t){e.exchange=t}},actions:{getTasks({commit:e},t){if(t.length>0){const a=t.map(e=>{if(!Array.isArray(e.keyword)){const t=e.keyword.split(", ");e.keyword=t}return e.id=String(e.id),e});localStorage.setItem("tasks",JSON.stringify(a)),e("setTasks",a)}},getExchange({commit:e},t){e("setExchange",t),localStorage.setItem("exchange",JSON.stringify(t))},getDeleteTask({commit:e,state:t},a){e("setDeleteTask",a),localStorage.setItem("tasks",JSON.stringify(t.tasks))},getTask({commit:e,state:t},a){e("updateTask",a),localStorage.setItem("tasks",JSON.stringify(t.tasks))}},modules:{}});Object(s["c"])(l).use(Ye).use(qe).mount("#app")},"5c35":function(e,t,a){"use strict";a("0098")},"786f":function(e,t,a){"use strict";a("369f")},9931:function(e,t,a){"use strict";a("56a9")},"9f25":function(e,t,a){},a953:function(e,t,a){},b053:function(e,t,a){},e99d:function(e,t,a){"use strict";a("25cb")},ed96:function(e,t,a){"use strict";a("3433")}});
//# sourceMappingURL=app.36e6d282.js.map